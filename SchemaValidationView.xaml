<Window x:Class="FileSignatureChecker.SchemaValidationView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:viewModels="clr-namespace:FileSignatureChecker.ViewModels"
        mc:Ignorable="d"
        WindowStartupLocation="CenterScreen"
        Title="Проверка схемы XML/GGE"
        Height="600"
        Width="900"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        FontFamily="{materialDesign:MaterialDesignFont}">

    <Window.DataContext>
        <viewModels:SchemaValidationViewModel />
    </Window.DataContext>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <TextBlock Grid.Row="0"
                   Text="Валидация XML/GGE файлов"
                   Style="{StaticResource MaterialDesignHeadline4TextBlock}"
                   Margin="0,0,0,20" />

        <!-- Кнопка загрузки файла -->
        <Button Grid.Row="1"
                Command="{Binding LoadFileCommand}"
                IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBooleanConverter}}"
                Style="{StaticResource MaterialDesignRaisedButton}"
                Height="50"
                Margin="0,0,0,20">
            <StackPanel Orientation="Horizontal">
                <materialDesign:PackIcon Kind="FileUpload"
                                         VerticalAlignment="Center"
                                         Margin="0,0,10,0"
                                         Width="24"
                                         Height="24" />
                <TextBlock Text="Загрузить файл (XML/GGE)"
                           VerticalAlignment="Center" />
            </StackPanel>
        </Button>

        <!-- Область результатов -->
        <Border Grid.Row="2"
                BorderBrush="{DynamicResource MaterialDesignDivider}"
                BorderThickness="1"
                CornerRadius="4"
                Padding="15"
                Background="{DynamicResource MaterialDesignCardBackground}">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <!-- Имя файла -->
                    <TextBlock Text="{Binding FileName}"
                               Style="{StaticResource MaterialDesignBody2TextBlock}"
                               Margin="0,0,0,10"
                               Visibility="{Binding IsFileNameVisible, Converter={StaticResource BooleanToVisibilityConverter}}" />

                    <!-- Результат валидации -->
                    <TextBlock Text="{Binding ValidationResultText}"
                               TextWrapping="Wrap"
                               FontSize="14"
                               LineHeight="24">
                        <!-- ВОТ ЗДЕСЬ ЦВЕТ! -->
                        <TextBlock.Foreground>
                            <MultiBinding Converter="{StaticResource ValidationResultColorConverter}">
                                <Binding Path="IsValidationSuccess" />
                                <Binding Path="IsLoading" />
                            </MultiBinding>
                        </TextBlock.Foreground>
                    </TextBlock>

                    <!-- Индикатор загрузки -->
                    <ProgressBar IsIndeterminate="True"
                                 Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}"
                                 Margin="0,20,0,0"
                                 Style="{StaticResource MaterialDesignCircularProgressBar}"
                                 Value="0"
                                 Width="48"
                                 Height="48" />
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Кнопка закрытия -->
        <Button Grid.Row="3"
                Command="{Binding CloseCommand}"
                Style="{StaticResource MaterialDesignOutlinedButton}"
                HorizontalAlignment="Right"
                Margin="0,20,0,0"
                Width="120">
            <StackPanel Orientation="Horizontal">
                <materialDesign:PackIcon Kind="Close"
                                         VerticalAlignment="Center"
                                         Margin="0,0,5,0" />
                <TextBlock Text="Закрыть" VerticalAlignment="Center" />
            </StackPanel>
        </Button>
    </Grid>
</Window>